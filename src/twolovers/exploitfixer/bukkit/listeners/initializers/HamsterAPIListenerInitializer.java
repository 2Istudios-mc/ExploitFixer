package twolovers.exploitfixer.bukkit.listeners.initializers;

import org.bukkit.plugin.Plugin;

import hamsterapi.HamsterAPI;
import hamsterapi.handlers.DecodeEventHandler;
import hamsterapi.handlers.PreProcessEventHandler;
import twolovers.exploitfixer.bukkit.listeners.ExploitFixerDecodeListener;
import twolovers.exploitfixer.bukkit.listeners.ExploitFixerPreProcessListener;
import twolovers.exploitfixer.bukkit.managers.ModuleManager;

public class HamsterAPIListenerInitializer {
    private final Plugin plugin;
    private final ModuleManager moduleManager;
    private ExploitFixerPreProcessListener exploitFixerPreProcessListener;
    private ExploitFixerDecodeListener exploitFixerDecodeListener;

    public HamsterAPIListenerInitializer(final Plugin plugin, final ModuleManager moduleManager) {
        this.plugin = plugin;
        this.moduleManager = moduleManager;
    }

    public void start() {
        final PreProcessEventHandler preProcessEventHandler = HamsterAPI.getPreProcessEventHandler();
        final DecodeEventHandler decodeEventHandler = HamsterAPI.getDecodeEventHandler();

        // preProcessEventHandler.addListener(this.exploitFixerPreProcessListener = new
        // ExploitFixerPreProcessListener(plugin, moduleManager));
        decodeEventHandler
                .addListener(this.exploitFixerDecodeListener = new ExploitFixerDecodeListener(plugin, moduleManager));
    }

    public void stop() {
        final PreProcessEventHandler preProcessEventHandler = HamsterAPI.getPreProcessEventHandler();
        final DecodeEventHandler decodeEventHandler = HamsterAPI.getDecodeEventHandler();

        // preProcessEventHandler.removeListener(exploitFixerPreProcessListener);
        decodeEventHandler.removeListener(exploitFixerDecodeListener);
    }
}
