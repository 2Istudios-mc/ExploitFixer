package twolovers.exploitfixer.bukkit.modules;

import org.bukkit.configuration.file.YamlConfiguration;
import twolovers.exploitfixer.bukkit.instanceables.BukkitThresholds;
import twolovers.exploitfixer.interfaces.instanceables.Thresholds;
import twolovers.exploitfixer.interfaces.modules.DuplicationModule;

public class BukkitDuplicationModule implements DuplicationModule {
	private boolean enabled;
	private int maxBytes;
	private int cancelVls, reduceVls;
	private Thresholds thresholds;

	public BukkitDuplicationModule(final Object configYml) {
		reload(configYml);
	}

	final public void reload(final Object configYml) {
		final YamlConfiguration configYml1 = (YamlConfiguration) configYml;
		final String name = getName().toLowerCase();

		this.enabled = configYml1.getBoolean(name + ".enabled");
		this.cancelVls = configYml1.getInt(name + ".cancel_vls");
		this.reduceVls = configYml1.getInt(name + ".reduce_vls");
		this.thresholds = new BukkitThresholds(configYml1.getConfigurationSection(name + ".thresholds"));
		this.maxBytes = configYml1.getInt("duplication.max_bytes");
	}

	final public Boolean isEnabled() {
		return enabled;
	}

	@Override
	public int getMaxBytes() {
		return maxBytes;
	}

	public String getName() {
		return "Duplication";
	}

	@Override
	public int getCancelVls() {
		return cancelVls;
	}

	@Override
	public int getReduceVls() {
		return reduceVls;
	}

	@Override
	public Thresholds getThresholds() {
		return thresholds;
	}
}
