package twolovers.exploitfixer.bukkit.modules;

import org.bukkit.configuration.file.YamlConfiguration;
import twolovers.exploitfixer.bukkit.instanceables.BukkitViolations;
import twolovers.exploitfixer.interfaces.instanceables.Violations;
import twolovers.exploitfixer.interfaces.modules.CommandsModule;

import java.util.Collection;

public class BukkitCommandsModule implements CommandsModule {
	private Collection<String> commands;
	private Violations violations;
	private double cancelVls, reduceVls;
	private boolean enabled;

	public BukkitCommandsModule(final Object configYml) {
		reload(configYml);
	}

	@Override
	final public boolean isEnabled() {
		return enabled;
	}

	@Override
	public String getName() {
		return "Commands";
	}

	@Override
	public double getCancelVls() {
		return cancelVls;
	}

	@Override
	public double getReduceVls() {
		return reduceVls;
	}

	@Override
	public Violations getViolations() {
		return violations;
	}

	@Override
	final public Collection<String> getCommands() {
		return commands;
	}

	@Override
	public void reload(Object configYml) {
		final YamlConfiguration configYml1 = (YamlConfiguration) configYml;
		final String name = getName().toLowerCase();

		this.enabled = configYml1.getBoolean(name + ".enabled");
		this.cancelVls = configYml1.getDouble(name + ".cancel_vls");
		this.reduceVls = configYml1.getDouble(name + ".reduce_vls");
		this.violations = new BukkitViolations(configYml1.getConfigurationSection(name + ".violations"));
		this.commands = configYml1.getStringList("commands.commands");
	}
}
