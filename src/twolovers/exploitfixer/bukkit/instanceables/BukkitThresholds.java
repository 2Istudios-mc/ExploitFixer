package twolovers.exploitfixer.bukkit.instanceables;

import org.bukkit.configuration.ConfigurationSection;
import twolovers.exploitfixer.interfaces.instanceables.Thresholds;

import java.util.Collection;
import java.util.HashMap;
import java.util.Map;

public class BukkitThresholds implements Thresholds {
	private Map<Integer, Collection<String>> thresholds = null;

	public BukkitThresholds(final ConfigurationSection configuration) {
		if (configuration != null)
			for (final String key : configuration.getKeys(false)) {
				try {
					if (this.thresholds == null)
						this.thresholds = new HashMap<>();

					this.thresholds.put(Integer.parseInt(key), configuration.getStringList(key));
				} catch (NumberFormatException ignored) {
				}
			}
	}

	public Collection<String> getCommands(final int violations) {
		return thresholds.getOrDefault(violations, null);
	}

	@Override
	public Collection<Integer> getThresholds() {
		return thresholds.keySet();
	}
}
