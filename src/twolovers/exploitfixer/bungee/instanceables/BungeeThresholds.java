package twolovers.exploitfixer.bungee.instanceables;

import net.md_5.bungee.config.Configuration;
import twolovers.exploitfixer.interfaces.instanceables.Thresholds;

import java.util.Collection;
import java.util.HashMap;
import java.util.Map;

public class BungeeThresholds implements Thresholds {
	private Map<Integer, Collection<String>> thresholds = null;

	public BungeeThresholds(final Configuration configuration) {
		if (configuration != null)
			for (final String key : configuration.getKeys()) {
				try {
					if (this.thresholds == null)
						this.thresholds = new HashMap<>();

					this.thresholds.put(Integer.parseInt(key), configuration.getStringList(key));
				} catch (NumberFormatException ignored) {
				}
			}
	}

	@Override
	public Collection<String> getCommands(final int violations) {
		return thresholds.getOrDefault(violations, null);
	}

	@Override
	public Collection<Integer> getThresholds() {
		return thresholds.keySet();
	}
}
