package twolovers.exploitfixer.bungee.listeners;

import net.md_5.bungee.api.event.PluginMessageEvent;
import net.md_5.bungee.api.plugin.Listener;
import net.md_5.bungee.event.EventHandler;
import twolovers.exploitfixer.interfaces.managers.ModuleManager;
import twolovers.exploitfixer.interfaces.modules.CustomPayloadModule;

public class PluginMessageListener implements Listener {
	final private CustomPayloadModule customPayloadModule;

	public PluginMessageListener(final ModuleManager moduleManager) {
		this.customPayloadModule = moduleManager.getCustomPayloadModule();
	}

	@EventHandler(priority = -128)
	public void onPluginMessage(final PluginMessageEvent event) {
		if (!event.isCancelled() && customPayloadModule.isEnabled())
			customPayloadModule.check(event);
	}
}

