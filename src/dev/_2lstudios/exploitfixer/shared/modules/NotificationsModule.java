package dev._2lstudios.exploitfixer.shared.modules;

import java.util.Collection;
import java.util.HashSet;
import java.util.logging.Logger;

import dev._2lstudios.exploitfixer.shared.configuration.IConfiguration;
import dev._2lstudios.exploitfixer.shared.interfaces.INotificationsModule;

public class NotificationsModule implements INotificationsModule {
    private final Logger logger;
    private final Collection<String> notifications = new HashSet<>();
    private boolean enabled, debug;
    private String message;

    public NotificationsModule(final Logger logger) {
        this.logger = logger;
    }

    public String getMessage() {
        return message;
    }

    public void reload(final IConfiguration configYml) {
        this.enabled = configYml.getBoolean("notifications.enabled", true);
        this.debug = configYml.getBoolean("notifications.debug", true);
        this.message = configYml.getString("notifications.message", "[Message not found in configuration]").replace('&',
                '\u00A7');
    }

    @Override
    public boolean isEnabled() {
        return this.enabled;
    }

    public void debug(final String message) {
        if (this.debug) {
            this.logger.info(message);
        }
    }

    public final void setNotifications(final String playerName, final boolean input) {
        if (input) {
            notifications.add(playerName);
        } else {
            notifications.remove(playerName);
        }
    }

    public final boolean isNotifications(final String playerName) {
        return notifications.contains(playerName);
    }

    public final Collection<String> getNotifications() {
        return notifications;
    }

    @Override
    public String getName() {
        return "Notifications";
    }

    @Override
    public void sendNotification(String check, Object player, int violations) {
        // Overrided by parent Bukkit/Bungee NotificationsModule
    }
}