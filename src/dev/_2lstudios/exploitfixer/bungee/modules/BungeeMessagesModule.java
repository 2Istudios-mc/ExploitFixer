package dev._2lstudios.exploitfixer.bungee.modules;

import dev._2lstudios.exploitfixer.shared.modules.MessagesModule;
import net.md_5.bungee.api.ChatColor;
import net.md_5.bungee.config.Configuration;

public class BungeeMessagesModule extends MessagesModule {
	private final String version;
	private Configuration messagesYml;
	private String discord;

	public BungeeMessagesModule(final String version, final Configuration messagesYml) {
		reload(messagesYml);
		this.version = version;
	}

	public void reload(final Configuration messagesYml) {
		this.messagesYml = messagesYml;
		this.discord = messagesYml.getString("discord", "<no_link>");
	}

	@Override
	public String getString(final String locale, final String path) {
		String string = messagesYml.getString(locale + path);

		if (string == null || string.isEmpty()) {
			string = messagesYml.getString("en" + path);
		}

		if (string != null && !string.isEmpty()) {
			return ChatColor.translateAlternateColorCodes('&',
					string.replace("%version%", version).replace("%discord%", discord));
		} else {
			return "";
		}
	}
}