package dev._2lstudios.exploitfixer.bungee.managers;

import dev._2lstudios.exploitfixer.bungee.modules.BungeeMessagesModule;
import dev._2lstudios.exploitfixer.bungee.modules.BungeeNotificationsModule;
import dev._2lstudios.exploitfixer.shared.configuration.IConfiguration;
import dev._2lstudios.exploitfixer.shared.modules.CommandsModule;
import dev._2lstudios.exploitfixer.shared.modules.ConnectionModule;
import dev._2lstudios.exploitfixer.shared.modules.MessagesModule;
import dev._2lstudios.exploitfixer.shared.modules.NotificationsModule;
import dev._2lstudios.exploitfixer.shared.modules.PacketsModule;
import net.md_5.bungee.api.ProxyServer;
import net.md_5.bungee.api.plugin.Plugin;

public class ModuleManager {
	private CommandsModule commandsModule;
	private ConnectionModule connectionModule;
	private PacketsModule packetsModule;
	private BungeeMessagesModule messagesModule;
	private NotificationsModule notificationsModule;
	private ExploitPlayerManager exploitPlayerManager;

	public ModuleManager(final Plugin plugin) {
		final ProxyServer server = plugin.getProxy();

		this.commandsModule = new CommandsModule();
		this.connectionModule = new ConnectionModule();
		this.packetsModule = new PacketsModule();
		this.messagesModule = new BungeeMessagesModule(plugin.getDescription().getVersion());
		this.notificationsModule = new BungeeNotificationsModule(server.getConsole(), plugin.getLogger(), server);
		this.exploitPlayerManager = new ExploitPlayerManager(server, this);
	}

	public void reload(final IConfiguration configYml, final IConfiguration messagesYml) {
		this.commandsModule.reload(configYml);
		this.connectionModule.reload(configYml);
		this.packetsModule.reload(configYml);
		this.messagesModule.reload(messagesYml);
		this.notificationsModule.reload(configYml);
		this.exploitPlayerManager.reload();
	}

	public CommandsModule getCommandsModule() {
		return commandsModule;
	}

	public ConnectionModule getConnectionModule() {
		return connectionModule;
	}

	public PacketsModule getPacketsModule() {
		return packetsModule;
	}

	public MessagesModule getMessagesModule() {
		return messagesModule;
	}

	public NotificationsModule getNotificationsModule() {
		return notificationsModule;
	}

	public ExploitPlayerManager getExploitPlayerManager() {
		return exploitPlayerManager;
	}
}
