package dev._2lstudios.exploitfixer.bukkit.modules;

import org.bukkit.ChatColor;
import org.bukkit.configuration.Configuration;

import dev._2lstudios.exploitfixer.shared.interfaces.Module;

public class MessagesModule implements Module {
	private Configuration messagesYml;
	private final String version;

	public MessagesModule(final String version, final Configuration messagesYml) {
		reload(messagesYml);
		this.version = version;
	}

	public boolean isEnabled() {
		return true;
	}

	public String getName() {
		return "Messages";
	}

	public void reload(final Configuration messagesYml) {
		this.messagesYml = messagesYml;
	}

	private String getString(final String locale, final String path) {
		String string = messagesYml.getString(locale + path);

		if (string == null || string.isEmpty()) {
			string = messagesYml.getString("en" + path);
		}

		if (string != null && !string.isEmpty()) {
			string = ChatColor.translateAlternateColorCodes('&', string);
		} else {
			string = "";
		}

		return string;
	}

	public final String getReload(final String locale) {
		return getString(locale, ".commands.reload");
	}

	public final String getHelp(final String locale) {
		return getString(locale, ".commands.help").replace("%version%", version);
	}

	public final String getUnknown(final String locale) {
		return getString(locale, ".commands.error.unknown");
	}

	public final String getPermission(final String locale) {
		return getString(locale, ".commands.error.permission");
	}

	public final String getConsole(final String locale) {
		return getString(locale, ".commands.error.console");
	}

	public final String getEnable(final String locale) {
		return getString(locale, ".commands.notifications.enable");
	}

	public final String getDisable(final String locale) {
		return getString(locale, ".commands.notifications.disable");
	}

	public final String getKickMessage(final Module module, final String locale) {
		return getString(locale, ".modules." + module.getName().toLowerCase() + ".kick_message");
	}

	public final String getKickMessage(final String module, final String locale) {
		return getString(locale, ".modules." + module.toLowerCase() + ".kick_message");
	}

	public String getStats(final String locale) {
		return getString(locale, ".modules.stats.message");
	}
}