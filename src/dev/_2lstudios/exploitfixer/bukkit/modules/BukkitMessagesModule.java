package dev._2lstudios.exploitfixer.bukkit.modules;

import org.bukkit.ChatColor;

import dev._2lstudios.exploitfixer.shared.configuration.IConfiguration;
import dev._2lstudios.exploitfixer.shared.modules.MessagesModule;

public class BukkitMessagesModule extends MessagesModule {
	private final String version;
	private IConfiguration messagesYml;
	private String discord;

	public BukkitMessagesModule(final String version) {
		this.version = version;
	}

	public void reload(final IConfiguration messagesYml) {
		this.messagesYml = messagesYml;
		this.discord = messagesYml.getString("discord", "<no_link>");
	}

	@Override
	public String getString(final String locale, final String path) {
		String string = messagesYml.getString(locale + path, null);

		if (string == null || string.isEmpty()) {
			string = messagesYml.getString("en" + path, null);
		}

		if (string != null && !string.isEmpty()) {
			return ChatColor.translateAlternateColorCodes('&',
					string.replace("%version%", version).replace("%discord%", discord));
		} else {
			return "";
		}
	}
}